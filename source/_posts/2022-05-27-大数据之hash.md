---
title: 大数据之hash
date: 2022-05-27 22:36:12
categories:
- 杂项内容学习
tags:
- 大数据
- Hash
---
jaccard相似度：用来描述两个集合间的相似度

jaccard(A，B) = (A^B)/(AUB)，即A与B交集的元素个数除以A与B并集的元素个数

K-single: 假如我们把一篇文章看成一个长的字符串，那么k-single就是这篇文章中长度为k的任意字符子串，一篇文章就是很多个不同的k-single的集合

例如 文章内容为"abcdabd"，k = 2 ,那么这篇文章中所有的k-single组成的集合为{ab,bc,cd,da,bd}

通过k-single的方式来表示每篇文章，然后通过判断每篇文章中single集合中相同元素的个数，可以得到文章的相似度

问题：以single的方式来存文章会消耗大量的内存



特征矩阵：特征矩阵的一列就对应一个集合，所有的行加起来就是所有集合元素的全集；如果集合中有这个元素，则矩阵中对应位置为1，否则为0

例子：假设现在有4个集合，

```
S1={a,d} S2={c} S3={b,d,e} S4={a,c,d}
```

全集

```
U ={a,b,c,d,e}
```

特征矩阵表示如下：

|      |  S1  |  S2  |  S3  |  S4  |
| ---- | :--: | :--: | :--: | :--: |
| a    |  1   |  0   |  0   |  1   |
| b    |  0   |  0   |  1   |  0   |
| c    |  0   |  1   |  0   |  1   |
| d    |  1   |  0   |  1   |  1   |
| e    |  0   |  0   |  1   |  0   |



mini Hash(最小hash)

为了计算最小hash,首先对特征矩阵的行进行打乱（即调整行与行之间的位置），这个打乱是随机的。

然后某一列的最小hash值就等于打乱后第一个值为1的行所在的行号，行号从0开始



**最小hash与jaccard相似度，经过打乱后的两个集合计算得到的最小哈希值相等的概率等于这两个集合的jacccard相似度**



最小哈希签名：当我们用多个随机打乱（假设为n个，分别为h1,h2,...,hn）来处理特征矩阵时，然后计算打乱后的这n个矩阵的最小哈希值，对于每个集合，都会有n个哈希值，这n个哈希值可以组成一个列向量[h1(S1),h2(S1),...,hn(Sn)]，如果有m个集合，就会有m个列向量，这m个列向量就会组成一个矩阵，这个矩阵就是特征矩阵的签名矩阵



最小签名的计算：

初始时，设置所有的sig(i,c)初始化为inf（无穷大）

先计算每一个hi(r)

对于每一行，如果某一列中的元素为1,讲sig(i,c)置为sig(i,c)和hi(r)之间的最小值，如果为0,则不进行操作





LSH 局部敏感性哈希算法：

如果有很多篇文章，那么如果要找出相似度很高的文档，我们两两比较，要比较的次数很多

讲矩阵分成很多个行条，每个行条会存在一个桶数组，如果再这个行条中集合a和集合b相似，将他们放在一个桶中，对于所有行条都不会存在一个桶中的集合，不在比较它们的相似度